# Technology choices

## For code generated by petrock

- github.com/spf13/cobra for CLIs
- net/http.ServeMux for routing
- mattn/go-sqlite3 for sqlite3 access
- slog for logging
- maragu.dev/gomponents for frontend components
- golang.org/x/crypto for password hashing and other crypto functions
- github.com/google/uuid for UUID generation

## Architecture Components

- core/app.go: Central application initialization and state management (no HTTP concerns)
- core/commands.go: Command registry and execution
- core/queries.go: Query registry and execution 
- core/form.go: Tag-based validation system for forms, JSON APIs, and CLI arguments
- core/log.go: Persistent event log
- cmd/<project>/serve.go: HTTP server setup and request handling

## Application Flow

1. App initialization (core/app.go) - creates DB, registries, message log, and executor
2. Feature registration (called from serve.go but registered with core components)
3. Log replay to rebuild state (must happen after registration for proper deserialization)
4. HTTP server setup and lifecycle (cmd/serve.go)

## For code in use in the petrock project

- github.com/spf13/cobra for CLIs
- net/http.ServeMux for routing
- mattn/go-sqlite3 for sqlite3 access
- slog for logging
- maragu.dev/gomponents for frontend components
- golang.org/x/crypto for password hashing and other crypto functions
- github.com/google/uuid for UUID generation
